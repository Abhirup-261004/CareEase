<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reminders ‚Äî CareEase</title>
  <meta name="description" content="Schedule medicines, vitals, and appointments with a calm, reliable alert loop." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" type="image/png" href="assets/logo.png" />

  <style>
    /* ====== Reminder Controls Styling ====== */
    .reminder-controls {
      margin: 1.5rem 0;
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .reminder-controls button,
    .reminder-controls input[type="file"] {
      padding: 0.6rem 1rem;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.25);
      background: linear-gradient(90deg, #6ee7b7, #c084fc, #60a5fa);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px rgba(110,231,183,0.25), 0 0 20px rgba(192,132,252,0.25);
    }

    .reminder-controls button:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 15px rgba(110,231,183,0.4), 0 0 30px rgba(192,132,252,0.4);
    }

    .reminder-controls input[type="file"] {
      background: rgba(255,255,255,0.05);
      color: var(--text, #fff);
      border: 1px solid rgba(255,255,255,0.2);
      font-weight: 500;
    }

    /* ====== Heading Typewriter + Gradient Glow ====== */
    h1.display, h2 {
      display: inline-block;
      overflow: hidden;
      border-right: 2px solid #6ee7b7;
      white-space: nowrap;
      font-weight: 800;
      font-size: clamp(24px, 2.5vw, 40px);
      background: linear-gradient(90deg, #6ee7b7, #c084fc, #60a5fa);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 10px rgba(110,231,183,0.25), 0 0 20px rgba(192,132,252,0.25);
      animation: heroGlow 3s ease-in-out infinite alternate, typing 1.8s steps(30, end) forwards;
    }

    h1.display.finished, h2.finished {
      border-right: none;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes heroGlow {
      0% { text-shadow: 0 0 10px rgba(110,231,183,0.25), 0 0 20px rgba(192,132,252,0.25); }
      50% { text-shadow: 0 0 20px rgba(110,231,183,0.5), 0 0 35px rgba(192,132,252,0.5); }
      100% { text-shadow: 0 0 10px rgba(110,231,183,0.25), 0 0 20px rgba(192,132,252,0.25); }
    }

    /* ====== Search + Buttons Styling ====== */
    #search {
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: var(--text, #fff);
      transition: all 0.3s ease;
    }
    #search:focus {
      outline: none;
      border-color: rgba(192,132,252,0.5);
      box-shadow: 0 0 8px rgba(192,132,252,0.3);
    }
    #testBell {
      background: linear-gradient(90deg, #6ee7b7, #60a5fa);
      color: #fff;
      border: none;
      box-shadow: 0 0 10px rgba(96,165,250,0.4);
      transition: all 0.3s ease;
    }
    #testBell:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 15px rgba(96,165,250,0.6);
    }

    /* ====== Section Spacing ====== */
    section.section {
      padding-top: 3rem;
      padding-bottom: 3rem;
    }
#voiceReminder {
  position: relative;
  background: linear-gradient(90deg, #fcd34d, #f97316);
  color: #fff;
  border: none;
  font-size: 0.95rem;
  font-weight: 700;
  padding: 0.6rem 1.2rem;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 0 10px rgba(252,211,77,0.4);
}

#voiceReminder:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 20px rgba(252,211,77,0.6), 0 0 30px rgba(249,115,22,0.6);
}

#voiceReminder.listening {
  animation: pulse 1s infinite alternate;
}

@keyframes pulse {
  0% { transform: scale(1); box-shadow: 0 0 15px rgba(252,211,77,0.4); }
  50% { transform: scale(1.05); box-shadow: 0 0 25px rgba(252,211,77,0.7); }
  100% { transform: scale(1); box-shadow: 0 0 15px rgba(252,211,77,0.4); }
}

.voice-status {
  display: none;
  position: absolute;
  top: 130%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.8rem;
  font-weight: 600;
  color: #fff;
  background: rgba(0,0,0,0.7);
  padding: 3px 8px;
  border-radius: 8px;
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}

#voiceReminder.listening .voice-status {
  display: block;
  opacity: 1;
}


  </style>
</head>
<body>
  <!-- ====== Topbar ====== -->
  <header class="topbar">
    <div class="container row">
      <a class="brand" href="index.html" aria-label="CareEase home">
        <img src="assets/logo2.png" alt="CareEase Logo" class="brand-logo" />
        <span>CareEase</span>
      </a>
      <nav class="primary" aria-label="Primary">
        <a href="index.html#features">Features</a>
        <a href="index.html#how">How it works</a>
        <a href="index.html#faq">FAQ</a>
        <a href="contact.html">Contact</a>
        <a href="about.html">About Us</a>
        <a href="reminders.html" aria-current="page">Reminders</a>
        <a href="blog.html">Blog</a>
        <button id="themeToggle" class="btn btn-outline" aria-pressed="false" aria-label="Toggle theme">üåì Theme</button>
        <a href="auth.html#signin" class="btn btn-primary">Get Started</a>
      </nav>
      <button class="hamburger" id="menuBtn" aria-expanded="false" aria-controls="mobnav">‚ò∞</button>
    </div>
    <div id="mobnav" hidden class="container" style="padding-top:0; padding-bottom:16px">
      <div class="card mobmenu">
        <a href="index.html#features">Features</a>
        <a href="index.html#how">How it works</a>
        <a href="index.html#faq">FAQ</a>
        <a href="contact.html">Contact</a>
        <a href="about.html">About Us</a>
        <a href="reminders.html" aria-current="page">Reminders</a>
        <a href="blog.html">Blog</a>
        <a href="auth.html#signin" class="btn btn-primary">Get Started</a>
      </div>
    </div>
  </header>

  <!-- ====== Hero ====== -->
  <section class="hero">
    <div class="container hero-grid">
      <div>
        <span class="eyebrow">Care that‚Äôs on time</span>
        <h1 class="display">Reminders</h1>
        <p class="lead">
          Create medicine, vitals, and appointment reminders with a gentle persistent alert.
          Missed items are logged so you can re-notify with one tap.
        </p>
        <div class="cta-row">
          <a class="btn btn-primary" href="#create">+ Add reminder</a>
          <a class="btn btn-outline" href="#missed">View missed</a>
        </div>
        <div class="hero-stats" role="list" aria-label="Highlights">
          <div class="stat" role="listitem"><b>Daily/Weekly</b><br><span class="muted">Simple repeat rules</span></div>
          <div class="stat" role="listitem"><b>Re-notify</b><br><span class="muted">One-tap catch-up</span></div>
          <div class="stat" role="listitem"><b>Local-first</b><br><span class="muted">Private by default</span></div>
        </div>
      </div>

      <aside class="mock" aria-label="In-app preview">
        <div class="pill" aria-hidden></div>
        <div class="screen">
          <div class="bar">
            <span class="app-title">CareEase</span>
            <span class="chip">‚è∞ Reminders</span>
          </div>
          <div class="app-body">
            <div class="app-card"><span class="dot"></span>
              <div><b>Metformin 500mg</b><div class="muted">Daily ‚Ä¢ 08:00</div></div>
            </div>
            <div class="app-card"><span class="dot alt"></span>
              <div><b>BP Check</b><div class="muted">Daily ‚Ä¢ 20:00</div></div>
            </div>
            <div class="app-card dashed"><span class="dot"></span>
              <div><b>Missed: Walk 15m</b><div class="muted">Tap to re-notify</div></div>
            </div>
          </div>
          <div class="app-footer">
            <span class="chip">+ Add</span>
            <span class="chip">Missed</span>
            <span class="chip">Contacts</span>
          </div>
        </div>
      </aside>
    </div>
  </section>

  <!-- ====== Step 2: Controls ====== -->
  <section class="section">
    <div class="container">
      <div class="reminder-controls">
        <button id="export-reminders">Export JSON</button>
        <input type="file" id="import-reminders" accept="application/json" />
        <button id="clear-reminders">Clear All</button>
      </div>
    </div>
  </section>

  <!-- ====== Create / Edit form ====== -->
  <section id="create" class="section">
    <div class="container">
      <h2>Add or edit a reminder</h2>
      <form id="reminderForm" class="form card">
        <input type="hidden" name="id" />
        <label>
          <span class="label">Type</span>
          <select name="type" required>
            <option value="medicine">Medicine</option>
            <option value="vitals">Vitals</option>
            <option value="appointment">Appointment</option>
            <option value="other">Other</option>
          </select>
        </label>
        <label>
          <span class="label">Title</span>
          <input type="text" name="title" placeholder="e.g., Metformin 500mg" required />
        </label>
        <label>
          <span class="label">Time</span>
          <input type="time" name="time" required />
        </label>
        <label>
          <span class="label">Repeat</span>
          <select name="repeat" required>
            <option value="once">Once</option>
            <option value="daily" selected>Daily</option>
            <option value="weekly">Weekly</option>
          </select>
        </label>
        <label class="full">
          <span class="label">Notes (optional)</span>
          <textarea name="notes" placeholder="Dose, instructions, location‚Ä¶"></textarea>
        </label>
        <label class="consent full">
          <input type="checkbox" name="enabled" checked />
          <span>Enable this reminder</span>
        </label>
        <div class="btns full">
          <button class="btn btn-primary" type="submit">Save reminder</button>
          <button class="btn btn-outline" type="reset" id="formReset">Clear</button>
        </div>

       <div class="reminder-controls">
  <button id="voiceReminder" title="Add reminder by voice">
    üé§ Voice Add
    <span id="voiceStatus" class="voice-status">Listening‚Ä¶</span>
  </button>
</div>


      </form>
    </div>
  </section>

  <!-- ====== Active reminders ====== -->
  <section class="section">
    <div class="container">
      <h2>Active reminders</h2>
      <div class="card" style="margin-top:10px">
        <div class="cta-row" style="justify-content:space-between; flex-wrap:wrap">
          <div class="muted">These run locally in your browser.</div>
          <div style="display:flex; gap:8px">
            <input id="search" placeholder="Search title‚Ä¶" style="padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.06); color: var(--text);" />
            <button id="testBell" class="btn btn-outline" type="button">üîî Test alert</button>
          </div>
        </div>
        <div id="list" class="steps" style="margin-top:12px"></div>
        <div class="muted" id="emptyState" style="display:none; padding:8px 0">No reminders yet ‚Äî add one above.</div>
      </div>
    </div>
  </section>

  <!-- ====== Missed log ====== -->
  <section id="missed" class="section">
    <div class="container">
      <h2>Missed items</h2>
      <div class="card" style="margin-top:10px">
        <div id="missedList" class="steps"></div>
        <div class="muted" id="missedEmpty" style="display:none; padding:8px 0">No missed items ‚Äî nice!</div>
      </div>
    </div>
  </section>

  <!-- ====== Footer ====== -->
  <footer class="site-footer" style="background: linear-gradient(135deg, var(--primaryA), var(--primaryB));">
    <div class="container foot-grid">
      <div class="footer-left" style="font-size:20px;color:black;">
        &copy; <b>CareEase</b> ‚Äî Built by <span class="highlight">Tech Titans</span>
      </div>

      <div class="foot-links" style="font-size:18px;color:black">
        <a href="privacy.html">Privacy Policy</a>
        <a href="terms.html">Terms of Service</a>
        <a href="license.html">License</a>
        <a href="https://github.com/Abhirup-261004/CareEase" target="_blank" rel="noopener" aria-label="GitHub">
          <i class="fa-brands fa-github" style="font-size:25px"></i>
        </a>
        <a href="#" id="backToTop" aria-label="Back to top">
          <i class="fa-solid fa-arrow-up"></i>
        </a>
      </div>
    </div>
  </footer>
  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- ====== JS ====== -->
  <script src="js/app.js"></script>
  <script src="js/reminders.js"></script>
  <script src="js/navbar-integration.js"></script>
  <script src="js/reminders-localstorage.js"></script>
 <script>
window.addEventListener('DOMContentLoaded', () => {
  // Initialize Step 2 persistence feature
  ReminderStorage.init('reminderForm', 'list');

  const micBtn = document.getElementById('voiceReminder');
  const statusText = document.getElementById('voiceStatus');
  const form = document.getElementById('reminderForm');
  const titleInput = form.querySelector('input[name="title"]');
  const timeInput = form.querySelector('input[name="time"]');
  const typeSelect = form.querySelector('select[name="type"]');
  const repeatSelect = form.querySelector('select[name="repeat"]');

  function parseTimeTo24Hour(timeStr) {
    const regex = /(\d{1,2})(?::(\d{2}))?\s*(am|pm)?/i;
    const match = timeStr.match(regex);
    if (!match) return null;

    let hour = parseInt(match[1], 10);
    let minute = parseInt(match[2] || '0', 10);
    const meridiem = match[3]?.toLowerCase();

    if (meridiem === 'pm' && hour < 12) hour += 12;
    if (meridiem === 'am' && hour === 12) hour = 0;

    const hh = hour.toString().padStart(2, '0');
    const mm = minute.toString().padStart(2, '0');
    return `${hh}:${mm}`;
  }

  if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.lang = 'en-US';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    micBtn.addEventListener('click', () => {
      micBtn.classList.add('listening');
      statusText.textContent = 'Listening‚Ä¶';
      recognition.start();
    });

    recognition.addEventListener('result', (event) => {
      const speech = event.results[0][0].transcript.toLowerCase();
      statusText.textContent = 'Processing‚Ä¶';

      setTimeout(() => {
        const remindRegex = /remind me to (.+) at (\d{1,2}(:\d{2})?\s?(am|pm)?)/i;
        const match = speech.match(remindRegex);

        if (match) {
          const task = match[1];
          let time = parseTimeTo24Hour(match[2]);

          if (time) {
            titleInput.value = task;
            timeInput.value = time;
            typeSelect.value = 'other';
            repeatSelect.value = 'once';
            form.scrollIntoView({ behavior: 'smooth' });

            statusText.textContent = '‚úÖ Reminder added!';
            setTimeout(() => statusText.textContent = '', 2000);
          } else {
            statusText.textContent = '‚ùå Could not parse time';
            setTimeout(() => statusText.textContent = '', 2000);
          }
        } else if (speech.includes('show all reminders')) {
          document.getElementById('list').scrollIntoView({ behavior: 'smooth' });
          statusText.textContent = 'üìÑ Showing reminders‚Ä¶';
          setTimeout(() => statusText.textContent = '', 2000);
        } else if (speech.includes('delete')) {
          statusText.textContent = '‚ö†Ô∏è Delete command recognized';
          setTimeout(() => statusText.textContent = '', 2000);
        } else {
          statusText.textContent = '‚ùå Could not understand';
          setTimeout(() => statusText.textContent = '', 2000);
        }

        micBtn.classList.remove('listening');
      }, 500);
    });

    recognition.addEventListener('end', () => {
      micBtn.classList.remove('listening');
    });

  } else {
    micBtn.disabled = true;
    statusText.textContent = "Voice not supported";
    micBtn.title = "Voice recognition not supported in this browser";
  }
});
</script>

</body>
</html>
